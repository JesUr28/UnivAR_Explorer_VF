<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Modelo 3D en AR</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jeromeetienne/AR.js/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
    <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>
    <!-- A√±adir aframe-animation-component para animaciones m√°s avanzadas -->
    <script src="https://unpkg.com/aframe-animation-component@5.1.2/dist/aframe-animation-component.min.js"></script>
    <link rel="stylesheet" href="../styles_AR.css">
</head>
<body>
    <div id="container">
        <!-- Contenedor del modelo 3D -->
        <div id="model-container">
            <a-scene embedded arjs="sourceType: webcam; detectionMode: mono_and_matrix; debugUIEnabled: false; matrixCodeType: 3x3; smoothCount: 7; smoothTolerance: 0.01; smoothThreshold: 5;"
                     vr-mode-ui="enabled: false" renderer="logarithmicDepthBuffer: true; alpha: true; precision: high; antialias: true;"
                     gesture-detector>
                <a-assets>
                    <a-asset-item id="sistemas" src="https://cdn.glitch.global/3ead7e32-4b9a-480a-9612-c05839d5bc25/SISTEMAS.glb"></a-asset-item>
                    <a-asset-item id="agroindustrial" src="https://cdn.glitch.global/3ead7e32-4b9a-480a-9612-c05839d5bc25/AGROINDUSTRIAL.glb"></a-asset-item>
                    <a-asset-item id="ambiental" src="https://cdn.glitch.global/3ead7e32-4b9a-480a-9612-c05839d5bc25/AMBIENTAL.glb"></a-asset-item>             
                    <a-asset-item id="agropecuario" src="https://cdn.glitch.global/3ead7e32-4b9a-480a-9612-c05839d5bc25/AGROPECUARIO.glb"></a-asset-item>
                    <a-asset-item id="administrador" src="https://cdn.glitch.global/3ead7e32-4b9a-480a-9612-c05839d5bc25/ADMINISTRADOR.glb"></a-asset-item>
                    <a-asset-item id="contador" src="https://cdn.glitch.global/3ead7e32-4b9a-480a-9612-c05839d5bc25/CONTADOR.glb"></a-asset-item>
                    <a-asset-item id="economista" src="https://cdn.glitch.global/3ead7e32-4b9a-480a-9612-c05839d5bc25/ECONOMISTA.glb"></a-asset-item>
                    <a-asset-item id="abogado" src="https://cdn.glitch.global/3ead7e32-4b9a-480a-9612-c05839d5bc25/DERECHO.glb"></a-asset-item>
                </a-assets>
                
                <!-- Marcadores-->
                <a-marker type="pattern" url="markers/pattern-1.patt" id="marker-sistemas" emitevents="true" smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="5">
                    <a-entity id="sistemas-model" gltf-model="#sistemas" scale="1 1 1"
                              position="0 -1.5 0" animation-mixer="loop: repeat" 
                              class="clickable" gesture-handler>
                    </a-entity>
                </a-marker>
                
                <a-marker type="pattern" url="markers/pattern-2.patt" id="marker-agroindustrial" emitevents="true" smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="5">
                    <a-entity id="agroindustrial-model" gltf-model="#agroindustrial" scale="1 1 1"
                              position="0 -1.5 0" animation-mixer="loop: repeat" 
                              class="clickable" gesture-handler>
                    </a-entity>
                </a-marker>
                
                <a-marker type="pattern" url="markers/pattern-3.patt" id="marker-ambiental" emitevents="true" smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="5">
                    <a-entity id="ambiental-model" gltf-model="#ambiental" scale="1 1 1"
                              position="0 -1.5 0" animation-mixer="loop: repeat" 
                              class="clickable" gesture-handler>
                    </a-entity>
                </a-marker>

                <a-marker type="pattern" url="markers/pattern-4.patt" id="marker-agropecuario" emitevents="true" smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="5">
                    <a-entity id="agropecuario-model" gltf-model="#agropecuario" scale="1 1 1"
                              position="0 -1.5 0" animation-mixer="loop: repeat" 
                              class="clickable" gesture-handler>
                    </a-entity>
                </a-marker>
                
                <a-marker type="pattern" url="markers/pattern-5.patt" id="marker-administrador" emitevents="true" smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="5">
                    <a-entity id="administrador-model" gltf-model="#administrador" scale="1 1 1"
                              position="0 -1.5 0" animation-mixer="loop: repeat" 
                              class="clickable" gesture-handler>
                    </a-entity>
                </a-marker>

                <a-marker type="pattern" url="markers/pattern-6.patt" id="marker-contador" emitevents="true" smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="5">
                    <a-entity id="contador-model" gltf-model="#contador" scale="1 1 1"
                              position="0 -1.5 0" animation-mixer="loop: repeat" 
                              class="clickable" gesture-handler>
                    </a-entity>
                </a-marker>

                <a-marker type="pattern" url="markers/pattern-7.patt" id="marker-economista" emitevents="true" smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="5">
                    <a-entity id="economista-model" gltf-model="#economista" scale="1 1 1"
                              position="0 -1.5 0" animation-mixer="loop: repeat" 
                              class="clickable" gesture-handler>
                    </a-entity>
                </a-marker>

                <a-marker type="pattern" url="markers/pattern-8.patt" id="marker-abogado" emitevents="true" smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="5">
                    <a-entity id="abogado-model" gltf-model="#abogado" scale="1 1 1"
                              position="0 -1.5 0" animation-mixer="loop: repeat" 
                              class="clickable" gesture-handler>
                    </a-entity>
                </a-marker>
                
                <a-entity camera></a-entity>
            </a-scene>
        </div>
        
        <!-- Contenedor del texto -->
        <div id="info-box">
            <div class="button-container">
                <button id="play-btn" class="speak-button hidden">
                    <span id="play-text">‚ñ∂Ô∏è Reproducir</span>
                    <span id="loading-text" class="hidden">
                        <span class="loading-spinner"></span> Cargando...
                    </span>
                </button>
                <button id="stop-btn" class="speak-button hidden">‚èπÔ∏è Detener</button>
                <button id="scan-new-btn" class="speak-button hidden">üîç Escanear nuevo</button>
            </div>
            <div id="instruction-message" class="instruction">
                <h2>Instrucciones</h2>
                <p>Escanea uno de los marcadores para ver el modelo 3D y su informaci√≥n. ¬°¬°Divi√©rtete!! Interact√∫a con el modelo para darle forma</p>
            </div>
            <h2 id="title" class="hidden"></h2>
            <p id="valor-text" class="hidden"></p>
        </div>
    </div>
    
    <!-- Mensaje de advertencia para dispositivos de escritorio -->
    <div id="desktop-warning">
        <h2>¬°Atenci√≥n!</h2>
        <p>Esta aplicaci√≥n est√° dise√±ada exclusivamente para dispositivos m√≥viles. En pantallas grandes, el dise√±o puede verse distorsionado y la experiencia AR no funcionar√° correctamente.</p>
        <div>
            <button id="back-btn">Regresar</button>
        </div>
    </div>
    
    <!-- Mensaje de advertencia para orientaci√≥n horizontal mejorado -->
    <div id="landscape-warning">
        <div class="warning-content">
            <div class="warning-icon">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#FFD700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
            </div>
            <h2>¬°Gira tu dispositivo!</h2>
            <p>Esta experiencia AR est√° dise√±ada para verse en modo vertical.</p>
            <div class="phone-container">
                <div class="phone horizontal">
                    <div class="phone-inner"></div>
                    <div class="phone-screen"></div>
                    <div class="cross-icon">‚úï</div>
                </div>
                <div class="arrow">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14"></path>
                        <path d="M12 5l7 7-7 7"></path>
                    </svg>
                </div>
                <div class="phone vertical">
                    <div class="phone-inner"></div>
                    <div class="phone-screen"></div>
                    <div class="check-icon">‚úì</div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>

